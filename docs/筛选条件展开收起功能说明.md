# 宠物服务列表页面筛选条件展开/收起功能说明

## 🎯 功能概述

在用户端宠物服务列表页面（`/web/userproductlist`）中，我们实现了一个完整的筛选条件展开/收起功能，让用户可以灵活控制筛选界面的显示状态，提升用户体验。

## ✨ 功能特点

### 1. 主筛选条件展开/收起
- **位置**: 页面顶部筛选卡片
- **功能**: 控制基础筛选条件的显示/隐藏
- **包含内容**:
  - 名称搜索
  - 服务种类选择
  - 服务时间段选择
  - 服务商评分筛选

### 2. 高级筛选展开/收起
- **位置**: 主筛选条件内部
- **功能**: 控制高级筛选选项的显示/隐藏
- **包含内容**:
  - 自定义时间段筛选
  - 操作按钮组（搜索、重置）

### 3. 交互方式
- **鼠标点击**: 点击展开/收起按钮
- **键盘快捷键**: 
  - `Ctrl + F`: 切换主筛选条件
  - `Ctrl + Shift + F`: 切换高级筛选

## 🎨 视觉效果

### 1. 按钮动画
- **图标旋转**: 展开时箭头向上旋转180度，收起时恢复
- **颜色变化**: 展开时按钮变为实心样式，收起时为轮廓样式
- **悬停效果**: 鼠标悬停时按钮上移并添加阴影

### 2. 卡片动画
- **平滑过渡**: 所有展开/收起动作都有0.3秒的平滑过渡
- **阴影效果**: 卡片悬停时增强阴影效果
- **响应式设计**: 在移动设备上自动调整按钮大小

### 3. 文字提示
- **动态文字**: 按钮文字根据状态动态变化
  - 展开状态: "收起筛选" / "收起高级筛选"
  - 收起状态: "展开筛选" / "展开高级筛选"

## 🔧 技术实现

### 1. HTML结构
```html
<!-- 主筛选条件 -->
<button class="btn btn-outline-primary btn-sm filter-toggle-btn" 
        type="button" 
        data-bs-toggle="collapse" 
        data-bs-target="#filterCollapse" 
        aria-expanded="true" 
        aria-controls="filterCollapse"
        id="filterToggleBtn">
  <i class="fa fa-chevron-down me-1"></i> 
  <span id="toggleText">收起筛选</span>
</button>

<!-- 高级筛选 -->
<button class="btn btn-outline-info btn-sm advanced-filter-btn" 
        type="button" 
        data-bs-toggle="collapse" 
        data-bs-target="#advancedFilter" 
        aria-expanded="false" 
        aria-controls="advancedFilter"
        id="advancedFilterBtn">
  <i class="fa fa-cog me-1"></i> 
  <span id="advancedToggleText">展开高级筛选</span>
</button>
```

### 2. CSS样式
```css
/* 筛选条件展开/收起按钮样式 */
.filter-toggle-btn {
  transition: all 0.3s ease;
  border-radius: 20px;
  font-weight: 500;
}

.filter-toggle-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,123,255,0.3);
}

.filter-toggle-btn .fa {
  transition: transform 0.3s ease;
}

.filter-toggle-btn[aria-expanded="true"] .fa-chevron-down {
  transform: rotate(180deg);
}
```

### 3. JavaScript逻辑
```javascript
// 初始化筛选条件展开/收起功能
initFilterToggle() {
  const filterToggleBtn = document.getElementById('filterToggleBtn');
  const filterCollapse = document.getElementById('filterCollapse');

  // 监听展开事件
  filterCollapse.addEventListener('show.bs.collapse', function () {
    const toggleText = document.getElementById('toggleText');
    const icon = filterToggleBtn.querySelector('.fa-chevron-down');
    if (toggleText) toggleText.textContent = '收起筛选';
    if (icon) icon.style.transform = 'rotate(180deg)';
    
    // 切换按钮样式
    filterToggleBtn.classList.add('btn-primary');
    filterToggleBtn.classList.remove('btn-outline-primary');
  });

  // 监听收起事件
  filterCollapse.addEventListener('hide.bs.collapse', function () {
    const toggleText = document.getElementById('toggleText');
    const icon = filterToggleBtn.querySelector('.fa-chevron-down');
    if (toggleText) toggleText.textContent = '展开筛选';
    if (icon) icon.style.transform = 'rotate(0deg)';
    
    // 切换按钮样式
    filterToggleBtn.classList.remove('btn-primary');
    filterToggleBtn.classList.add('btn-outline-primary');
  });
}
```

## 📱 响应式设计

### 移动设备优化
- **按钮大小**: 在小屏幕设备上自动调整按钮大小
- **触摸友好**: 增大点击区域，便于触摸操作
- **文字适配**: 在极小屏幕上可能隐藏部分提示文字

```css
@media (max-width: 768px) {
  .filter-toggle-btn {
    font-size: 0.875rem;
    padding: 0.375rem 0.75rem;
  }
  
  .advanced-filter-btn {
    font-size: 0.875rem;
    padding: 0.25rem 0.5rem;
  }
}
```

## 🎮 使用方法

### 1. 基本操作
1. **展开筛选条件**: 点击"展开筛选"按钮或按`Ctrl + F`
2. **收起筛选条件**: 点击"收起筛选"按钮或再次按`Ctrl + F`
3. **展开高级筛选**: 在筛选条件展开状态下，点击"展开高级筛选"按钮
4. **收起高级筛选**: 点击"收起高级筛选"按钮

### 2. 键盘快捷键
- `Ctrl + F`: 切换主筛选条件的展开/收起状态
- `Ctrl + Shift + F`: 切换高级筛选的展开/收起状态

### 3. 状态记忆
- 页面默认展开主筛选条件
- 高级筛选默认收起
- 用户的操作状态在页面刷新后会重置为默认状态

## 🔍 测试方法

### 1. 功能测试
1. 访问宠物服务列表页面：`http://localhost:7002/web/userproductlist`
2. 观察筛选条件卡片是否正常显示
3. 点击"收起筛选"按钮，验证筛选条件是否正确收起
4. 点击"展开筛选"按钮，验证筛选条件是否正确展开
5. 在展开状态下点击"展开高级筛选"，验证高级筛选是否正确显示
6. 测试键盘快捷键是否正常工作

### 2. 视觉测试
1. 验证按钮图标是否正确旋转
2. 验证按钮文字是否正确变化
3. 验证按钮颜色是否正确切换
4. 验证悬停效果是否正常
5. 验证动画过渡是否流畅

### 3. 响应式测试
1. 在不同屏幕尺寸下测试功能
2. 在移动设备上测试触摸操作
3. 验证按钮在小屏幕上的显示效果

## 🚀 后续优化建议

1. **状态持久化**: 可以考虑将用户的展开/收起偏好保存到localStorage
2. **更多快捷键**: 添加更多键盘快捷键支持
3. **动画增强**: 可以添加更丰富的动画效果
4. **无障碍优化**: 增强屏幕阅读器支持
5. **性能优化**: 对于大量筛选条件的情况进行性能优化

## 📝 注意事项

1. 确保Bootstrap 5.3.0已正确加载
2. 确保Font Awesome图标库已正确加载
3. 在修改相关代码时注意保持ID的唯一性
4. 测试时注意检查浏览器控制台是否有JavaScript错误

通过这个完整的筛选条件展开/收起功能，用户可以更灵活地控制页面界面，提升了整体的用户体验。
