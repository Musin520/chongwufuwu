-- 插入演示数据用于测试筛选功能
-- 这个脚本会插入一些测试数据，包含不同的时间段、价格和评分

USE chongwufuwu;

-- 首先确保有服务类型数据
INSERT IGNORE INTO producttype (id, type_name, type_des, createtime) VALUES
(1, '宠物美容', '专业的宠物美容服务', NOW()),
(2, '宠物医疗', '宠物健康检查和治疗', NOW()),
(3, '宠物寄养', '安全可靠的宠物寄养服务', NOW()),
(4, '宠物训练', '专业的宠物行为训练', NOW()),
(5, '宠物摄影', '记录宠物美好时光', NOW());

-- 确保有服务商数据
INSERT IGNORE INTO company (id, companyname, img, phonenumber, address, createtime, status, createid, avg_rating, rating_count) VALUES
(1, '爱宠美容中心', '/static/img/company1.jpg', '13800138001', '北京市朝阳区宠物街1号', NOW(), '1', 1, 4.8, 156),
(2, '宠物医院', '/static/img/company2.jpg', '13800138002', '北京市海淀区宠物大道2号', NOW(), '1', 2, 4.5, 89),
(3, '快乐宠物寄养', '/static/img/company3.jpg', '13800138003', '北京市丰台区宠物园3号', NOW(), '1', 3, 4.2, 67),
(4, '专业宠物训练', '/static/img/company4.jpg', '13800138004', '北京市西城区宠物路4号', NOW(), '1', 4, 4.9, 234),
(5, '宠物摄影工作室', '/static/img/company5.jpg', '13800138005', '北京市东城区宠物巷5号', NOW(), '1', 5, 4.6, 123);

-- 插入测试产品数据，包含不同的时间段和价格
INSERT IGNORE INTO product (
    id, productname, productdes, img, chengben, kedanjia, kucun, fahuotianshu, 
    chandi, guige, companyid, createtime, status, updatetime, producttype, 
    spare1, spare2, detailimg, service_start_time, service_end_time
) VALUES
-- 上午服务 (08:00-12:00)
(1, '宠物基础洗护', '包含洗澡、吹干、基础造型', '/static/img/service1.jpg', '30', '80', '10', '1次', '店内服务', '小型犬', 1, NOW(), '1', NOW(), 1, '0', '0', '', '08:00', '12:00'),
(2, '宠物健康体检', '全面的宠物健康检查', '/static/img/service2.jpg', '50', '120', '8', '1次', '店内服务', '全犬种', 2, NOW(), '1', NOW(), 2, '0', '0', '', '08:00', '12:00'),
(3, '宠物基础训练', '基本指令训练', '/static/img/service3.jpg', '40', '150', '5', '1次', '店内服务', '幼犬', 4, NOW(), '1', NOW(), 4, '0', '0', '', '08:00', '12:00'),

-- 下午服务 (12:00-18:00)
(4, '宠物精致美容', '包含洗护、造型、美甲', '/static/img/service4.jpg', '60', '180', '6', '1次', '店内服务', '中型犬', 1, NOW(), '1', NOW(), 1, '0', '0', '', '12:00', '18:00'),
(5, '宠物疫苗接种', '常规疫苗接种服务', '/static/img/service5.jpg', '80', '200', '10', '1次', '店内服务', '全犬种', 2, NOW(), '1', NOW(), 2, '0', '0', '', '12:00', '18:00'),
(6, '宠物日间寄养', '白天寄养服务', '/static/img/service6.jpg', '20', '60', '15', '1天', '店内服务', '全犬种', 3, NOW(), '1', NOW(), 3, '0', '0', '', '12:00', '18:00'),
(7, '宠物写真拍摄', '专业宠物摄影', '/static/img/service7.jpg', '100', '300', '3', '1次', '店内服务', '全犬种', 5, NOW(), '1', NOW(), 5, '0', '0', '', '12:00', '18:00'),

-- 晚上服务 (18:00-22:00)
(8, '宠物夜间寄养', '夜间寄养服务', '/static/img/service8.jpg', '30', '100', '12', '1晚', '店内服务', '全犬种', 3, NOW(), '1', NOW(), 3, '0', '0', '', '18:00', '22:00'),
(9, '宠物行为矫正', '专业行为问题矫正', '/static/img/service9.jpg', '80', '250', '4', '1次', '店内服务', '成犬', 4, NOW(), '1', NOW(), 4, '0', '0', '', '18:00', '22:00'),

-- 全天服务 (08:00-22:00)
(10, '宠物全天寄养', '24小时寄养服务', '/static/img/service10.jpg', '50', '150', '20', '1天', '店内服务', '全犬种', 3, NOW(), '1', NOW(), 3, '0', '0', '', '08:00', '22:00'),
(11, '宠物紧急医疗', '24小时紧急医疗服务', '/static/img/service11.jpg', '100', '400', '5', '1次', '店内服务', '全犬种', 2, NOW(), '1', NOW(), 2, '0', '0', '', '08:00', '22:00'),
(12, '宠物VIP美容', '顶级美容护理服务', '/static/img/service12.jpg', '150', '500', '2', '1次', '店内服务', '大型犬', 1, NOW(), '1', NOW(), 1, '0', '0', '', '08:00', '22:00'),

-- 不同价格区间的服务
(13, '宠物基础清洁', '简单清洁服务', '/static/img/service13.jpg', '15', '35', '20', '1次', '店内服务', '小型犬', 1, NOW(), '1', NOW(), 1, '0', '0', '', '09:00', '17:00'),
(14, '宠物高级训练', '高级技能训练', '/static/img/service14.jpg', '200', '600', '3', '1次', '店内服务', '成犬', 4, NOW(), '1', NOW(), 4, '0', '0', '', '10:00', '16:00'),
(15, '宠物专业摄影', '专业级摄影服务', '/static/img/service15.jpg', '250', '800', '2', '1次', '店内服务', '全犬种', 5, NOW(), '1', NOW(), 5, '0', '0', '', '14:00', '20:00');

-- 插入一些评价数据来测试评分筛选
INSERT IGNORE INTO orderevalute (id, content, createtime, userid, orderid, companyid, rating) VALUES
-- 为公司1的评价
(1, '服务很好，宠物很喜欢', NOW(), 1, 1, 1, 5.0),
(2, '专业的美容师，效果不错', NOW(), 2, 2, 1, 4.5),
(3, '价格合理，服务周到', NOW(), 3, 3, 1, 4.8),

-- 为公司2的评价
(4, '医生很专业，诊断准确', NOW(), 1, 4, 2, 4.5),
(5, '设备先进，服务态度好', NOW(), 2, 5, 2, 4.3),

-- 为公司3的评价
(6, '寄养环境不错，宠物很适应', NOW(), 1, 6, 3, 4.2),
(7, '工作人员很负责', NOW(), 3, 7, 3, 4.0),

-- 为公司4的评价
(8, '训练效果显著，非常满意', NOW(), 2, 8, 4, 5.0),
(9, '专业的训练师，方法科学', NOW(), 1, 9, 4, 4.8),
(10, '宠物进步很大', NOW(), 3, 10, 4, 4.9),

-- 为公司5的评价
(11, '拍摄效果很棒，很有纪念意义', NOW(), 1, 11, 5, 4.7),
(12, '摄影师很有耐心', NOW(), 2, 12, 5, 4.5);

-- 更新公司的平均评分和评价数量
UPDATE company SET 
    avg_rating = (SELECT AVG(rating) FROM orderevalute WHERE companyid = company.id),
    rating_count = (SELECT COUNT(*) FROM orderevalute WHERE companyid = company.id)
WHERE id IN (1, 2, 3, 4, 5);

COMMIT;
